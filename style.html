<h1>C++ Style Overview</h1>

<p><em>Created by Alex Churchill for CS106X, Fall 2012</em></p>

<p><strong>Introduction:</strong> This is not a complete style guide, in the style of <a href="http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml">Google</a> or <a href="http://www.ros.org/wiki/CppStyleGuide">ROS</a>.  Rather, it is an overview of my expectations for my CS106X sections; how your code should look and what will impact your style grade.</p>

<h2>Decomposition (~50% of your grade):</h2>

<ul>
<li>Rule of thumb: no functions longer than 15 lines.</li>
<li>DRY (Don't Repeat Yourself): if you have two segments of code that are nearly identical, they should be decomposed into a single function.</li>
<li><strong>CODE TOP DOWN!!</strong>: Coding everything in a few big functions, then "decomposing it out" at the end is NOT OK. I know it's tempting; it seems easier to get all the code out, then clean it up, however keeping your code clean, organized and decomposed AS YOU GO will pay dividends -- you will have fewer bugs, understand the code better and actually complete assignments faster.  Here are some guidelines:
<ul><li>Start in <code>main</code>.</li>
<li>As you code, <em>don't ever let a function get longer than 15 lines</em>.</li>
<li>Don't define a function until you have already called it (so for Game of Life, you would call <code>PopulateRandomBoard</code> before actually defining it)</li></ul></li>
</ul>

<h2>Commenting (~20%):</h2>

<p>There are two types of comments.</p>

<p><strong>Function Comments</strong> appear before a function and look visually as demonstrated. Note they are started with a <code>/**</code>, led by an aligned line of <code>*</code>'s and concluded by <code>*/</code>.</p>

<pre><code>/**
 * Function: bool GetYesOrNo(string prompt)
 * 
 * This function displays a prompt to the user, asking
 * for a yes/no answer (yes/y, no/n; case-insensitive), then
 * returns the response as a boolean.
 *
 * prompt: the string to display
 */
 bool GetYesOrNo(string prompt) {
     cout &lt;&lt; prompt &lt;&lt; endl;
     ...
</code></pre>

<p>You should have a function comment for any substantial (more than a couple lines) function.  These are by far the most common form of comments and are hallmarks of good, professional-looking code.</p>

<p><strong>Inline Comments</strong> appear inline in code and are like <em>band-aids over messy code</em>. You should <em>only</em> use inline comments if you are doing something confusing. They are on the same line as code and use <code>//</code>.</p>

<pre><code>/**
  * Function: double FastInverseSquareRoot(double number)
  *
  * Returns a fast approximation of 1/sqrt(number)
  * Credit to John Carmack and Gary Tarolli. For more info, check out
  * http://en.wikipedia.org/wiki/Fast_inverse_square_root.
  */
double FastInverseSquareRoot(double number)
{
    long i;
    float x2, y;
    const float threehalfs = 1.5F;

    x2 = number * 0.5F;
    y  = number;
    i  = * ( long * ) &amp;y;                       // Floating point bit level hacking
    i  = 0x5f3759df - ( i &gt;&gt; 1 );               // Hack to reverse -e/2 + 127 error
    y  = * ( float * ) &amp;i;
    y  = y * ( threehalfs - ( x2 * y * y ) );   // 1st iteration of Newton's method

    return y;
}
</code></pre>

<p>Note that here, the comments are explaining otherwise-confusing code. <strong>Please do not write confusing code</strong>! You should almost never need inline comments; focus on making your code clear instead.</p>

<h2>Code Clarity and Visuals (~20%):</h2>

<p>Code should look good.  Good-looking code is easier to read and understand, whether it is your boss, section leader, co-worker, or yourself after two weeks reading your code. There are a few rules that will make your code look clean and visually appealing:</p>

<h3>Indenting and Braces</h3>

<p>Option #1:</p>

<pre><code>if(MyCondition()) {
    int x = 2;
    int y = 4;
    int z = 10 * y + x;
}
</code></pre>

<p>Option #2:</p>

<pre><code>if(MyCondition())
{
  int x = 2;
  int y = 4;
  int z = 10 * y + x;
}
</code></pre>

<p>Either place braces on the same line as <code>if</code>, <code>for</code>, <code>while</code>, and function definitions or on the next line. Either indent 2 spaces or 4 spaces (or 1 tab, though I prefer spaces) each time. Most important, <strong>BE CONSISTENT!</strong></p>

<h3>Capitalization</h3>

<ul>
<li>Functions are capitalized with camel-case: <code>ThisIsAFunction();</code></li>
<li>Methods start lower-case and are camel-case: <code>thisIsAMethod();</code>
<ul><li>To clarify: a <strong>Function</strong> appears outside a class (you will work exclusively with functions until PQueue). A <strong>Method</strong> appears inside a class and is attached to an object (so <code>GetLength(myVector)</code> is a function, but in <code>myGrid.size()</code>, <code>size()</code> is a method).</li></ul></li>
<li>Variables start lower-case and are camel-case: <code>int myVariable = 5;</code></li>
<li>Constants are all capitalized and separated by underscores: <code>const int MY_CONSTANT = 5;</code></li>
</ul>

<h3>Function Prototypes</h3>

<p>Each function other than <code>main</code> should be prototyped, either in a <strong>.h</strong> file or at the beginning of the <strong>.cpp</strong> file:</p>

<pre><code>// Function Prototypes
bool MyCondition(int variable);
void DoWork();


int main() {
  if(MyCondition(5)) {
    DoWork();
  }
}


/**
  * Function: MyCondition(int variable)
  *
  * This returns whether variable is a multiple of 3.
  */
bool MyCondition(int variable) {
  return variable % 3 == 0;
}

...
</code></pre>

<h3>Spacing and Newlines</h3>

<p>Use reasonable spacing between functions -- either 1 or two newlines, keep it consistent.  Don't use more than one or two blank lines in a function -- some spacing can enhance clarity, but too much makes the code hard to read.</p>

<h2>Correct Code Structure and ADTs (~10%):</h2>

<p>I don't grade much on code structure, because there are many ways to solve a particular problem, but there are some stylistic choices that will help improve the overall quality of your code.  The big ones are:</p>

<ul>
<li>Only use recursion when you need to
<ul><li>If you can use a <code>for</code> or <code>while</code> loop instead, do (unless we require you to use recursion for an assignment)</li>
<li>NEVER use recursion to loop (for instance, having <code>NextGeneration</code> in Life call <code>NextGeneration</code> would be WRONG!).</li></ul></li>
<li>Think about the type of structure you should use
<ul><li>If you are just adding items, removing items, and checking for existence (maybe keeping track of the words you found in Boggle), <strong>use a Set, not a Vector</strong>.</li>
<li>If you need to keep track of order, use a Vector or a linked list</li>
<li>If you have a grid-like structure (and here I'm thinking of Boggle again), <strong>use a Grid, not a Vector of pairs!</strong>.</li></ul></li>
</ul>